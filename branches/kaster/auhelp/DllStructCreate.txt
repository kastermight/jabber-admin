
DllStructCreate

Создаёт структуру в стиле C/C++ для использования в DllCall.

DllStructCreate ( "Struct" [,Pointer] )

---  Таблица параметров  ---
"Struct"
	Строка, представляющая создаваемую структуру (см. примечания).
Pointer
	[опционально] Если структуре не выделена память, но используется указатель.

---  Таблица возвращаемых значений  ---
Успех:	Возвращает переменную для использования вызова команд DllStruct.
Ошибка:	Возвращает 0.
@Error:	0 = нет ошибок.
	1 = Передаваемая в DllStructCreate переменная не является строкой.
	2 = В переданной строке присутствует неизвестный тип данных.
	3 = Не удалось выделить память, необходимую для структуры или указатель (Pointer) = 0.
	4 = Ошибка выделения памяти для переданной строки.


---  Таблица параметров  ---
Тип
	Подробно
BYTE
	8 бит (1 байт) беззнаковый символ
BOOLEAN
	8 бит (1 байт) беззнаковый символ
CHAR
	8 бит (1 байт) ASCII символ
WCHAR
	16 бит (2 байта) UNICODE широкий символ
short
	16 бит (2 байта) знаковое целое
USHORT
	16 бит (2 байта) беззнаковое целое
WORD
	16 бит (2 байта) беззнаковое целое
int
	32 бит (4 байта) знаковое целое
long
	32 бит (4 байта) знаковое целое
BOOL
	32 бит (4 байта) знаковое целое
UINT
	32 бит (4 байта) беззнаковое целое
ULONG
	32 бит (4 байта) беззнаковое целое
DWORD
	32 бит (4 байт) беззнаковое целое
INT64
	64 бит (8 байт) знаковое целое
UINT64
	64 бит (8 байт) беззнаковое целое
ptr
	32 or 64 бит беззнаковое целое (в зависимости от используемой версии AutoIt, x86 или x64)
HWND
	32 бит (4 байта) целое
HANDLE
	32 бит (4 байта) целое
float
	32 бит (4 байта) с плавающей точкой
double
	64 бит (8 байт) с плавающей точкой
INT_PTR, LONG_PTR, LRESULT, LPARAM
	32 или 64 бит знаковое целое (в зависимости от используемой версии AutoIt, x86 или x64)
UINT_PTR, ULONG_PTR, DWORD_PTR, WPARAM
	32 или 64 бит беззнаковое целое (в зависимости от используемой версии AutoIt, x86 или x64)

---  Примечания  ---
Каждый тип данных должен быть разделен точкой с запятой ';'.

Создание массива добавлением '[size]' после типа данных: DllStructCreate("int;char[128]")

Добавляемые имена элементов имитируют объявление в стиле языка программирования C: DllStructCreate("int n;char buffer[128]").
Эти имена элементов можно использовать в других функциях DllStruct...  Имена элементов должны быть буквенно-цифровые или подчеркивание.

Для использования различных префиксов выравнивания структуры с выравниванием ключевых слов.  По умолчанию значение n - 8. Правильные значения 1, 2, 4, 8, и 16.  Выравнивание элемента будет находится на границе, которая также кратна n или кратна размеру элемента, в зависимости от меньшего.  Это эквивалентно опции #pragma pack в компиляторе Microsoft Visual C++.

DllStructCreate("short;int")     ; структура 8 байт, "int" со смещением 4
DllStructCreate("align 2;short;int")     ; структура 6 байт, "int" со смещением 2

DllStructCreate("byte;double")     ; структура 16 байт, "double" со смещением 8
DllStructCreate("align 4;byte;double")     ; структура 12 байт, "double" со смещением 4

Если изменено выравнивание, то необходимо "align" использовать перед первым элементом, который должен быть изменён.
"align" или "align 8" приводит к выравниванию по умолчанию.

Чтобы освободить выделенную память просто установите возвращённую переменную в 0.

---  Смотрите также  ---
DllCall, DllStructGetData, DllStructSetData, DllStructGetPtr, DllStructGetSize, IsDllStruct